# Синхронізовано: 2026-01-22 00:26:00 (v4.6 - Full Model Centralization + Advanced Settings)

# =============================================================================
# GLOBAL MODEL CONFIGURATION
# =============================================================================
# Single source of truth for all models used across the system
# Change defaults here to switch models globally

models:
  # Default models for different purposes
  default: gpt-4o                    # Default LLM для всіх agents
  vision: gpt-4o                     # Vision/multimodal tasks
  reasoning: gpt-4o                  # Deep reasoning (sequential-thinking)
  code_analysis: gpt-4o              # Code review and analysis
  consolidation: gpt-4o              # Memory consolidation (nightly)
  
  # Vibe binary defaults (external CLI tool)
  vibe_default: devstral-2           # Recommended: devstral-2 for code tasks
  
  # Fallbacks (used when primary unavailable)
  fallback: gpt-4o-mini

# ============================================================================
# BEHAVIOR ENGINE
# =============================================================================

behavior:
  config_file: behavior_config.yaml
  hot_reload_enabled: true
  cache_ttl_seconds: 1800

# =============================================================================
# VOICE CONFIGURATION
# =============================================================================

voice:
  stt:
    model: large-v3
    device: cpp
    language: uk
  tts:
    engine: ukrainian-tts
    device: cpu
    enabled: true

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================
# Agents inherit from models.default unless overridden

agents:
  atlas:
    # model: inherited from models.default
    temperature: 0.7
    max_tokens: 2000

  tetyana:
    # model, reasoning_model, vision_model: inherited from defaults
    temperature: 0.5
    max_tokens: 2000

  grisha:
    # vision_model, strategy_model: inherited from defaults
    temperature: 0.3
    max_tokens: 1500

# =============================================================================
# MCP SERVER CONFIGURATION
# =============================================================================

mcp_enhanced:
  retry_attempts: 3
  connection_timeout: 3600

mcp:
  # === TIER 1: MUST-HAVE (Ядро системи) ===
  macos_use:
    enabled: true
    permissions:
      accessibility: true
      screen_recording: true

  filesystem:
    enabled: true
    deny_write_repo: true
    repo_write_allowed_subdir: .atlastrinity_runtime
    deny_write_paths: []
    allowed_paths:
      - ${HOME}
      - /tmp

  sequential_thinking:
    enabled: true
    # model: inherited from models.reasoning
    max_history_size: 1000

  # === TIER 2: HIGH PRIORITY (Рекомендовані) ===
  vibe:
    enabled: true
    binary: vibe
    # Default model defined in vibe_config.toml (devstral-2)
    workspace: ${CONFIG_ROOT}/vibe_workspace
    timeout_s: 3600
    max_output_chars: 500000
    disallow_interactive: true

  memory:
    enabled: true
    chroma_path: ${CONFIG_ROOT}/memory/chroma
    collection_name: atlastrinity_memory

  graph:
    enabled: true

  redis:
    enabled: true
    url: redis://localhost:6379/0

  duckduckgo_search:
    enabled: true

  github:
    enabled: true
    # Advanced GitHub API: Pull Requests, Issues, Search, Repository Management
    # Requires GITHUB_TOKEN in your .env file

  whisper_stt:
    enabled: true
    model: large-v3
    language: uk

  devtools:
    enabled: true
    # All tools enabled by default
    ruff_enabled: true
    oxlint_enabled: true
    knip_enabled: true
    pyrefly_enabled: true
    inspector_enabled: true
    health_check_enabled: true

  # === TIER 3: ADDITIONAL (Додаткові) ===
  puppeteer:
    enabled: true
    headless: true

  # === TIER 4: SPECIALIZED (Спеціалізовані / Дебаг) ===
  chrome_devtools:
    enabled: true

  context7:
    enabled: false # External documentation server

# =============================================================================
# ORCHESTRATOR CONFIGURATION
# =============================================================================

orchestrator:
  # Timeouts
  task_timeout: 3600
  subtask_timeout: 120
  user_input_timeout: 20
  
  # Recursion control
  max_recursion_depth: 5
  
  # Verification
  validate_failed_steps_with_grisha: false  # Set to true to enable Auditor verification on fail
  recovery_voice_agent: atlas  # Which agent explains the recovery strategy

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

security:
  dangerous_commands:
    - rm -rf
    - mkfs
    - dd if=
    - ":(){ :|:& };:"
  require_confirmation: true

# =============================================================================
# SYSTEM PATHS
# =============================================================================

system:
  workspace_path: ${CONFIG_ROOT}/workspace
  repository_path: ${PROJECT_ROOT}

# =============================================================================
# API CONFIGURATION
# =============================================================================

api:
  timeout: 60
  retry_count: 3

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

database:
  url: sqlite+aiosqlite:///${CONFIG_ROOT}/atlastrinity.db

# =============================================================================
# STATE MANAGEMENT
# =============================================================================

state:
  redis_url: ${REDIS_URL}  # usually redis://localhost:6379/0

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

logging:
  level: INFO
  max_log_size: 10485760
  backup_count: 5
