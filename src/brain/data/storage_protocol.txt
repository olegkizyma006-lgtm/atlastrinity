STORAGE & MEMORY PROTOCOL (v1.0)
==============================

1. PHYSICAL STORAGE LOCATIONS
-----------------------------
- WORKSPACE: `~/.config/atlastrinity/workspace` (Main area for all active work).
- DOWNLOADS: `~/.config/atlastrinity/workspace/downloads` (Primary destination for files from internet/browsers).
- DATA VAULT: `~/.config/atlastrinity/workspace/vault` (Long-term storage for secondary databases, datasets from registries).
- VIBE PROJECTS: `~/.config/atlastrinity/vibe_workspace` (Software, codebases, and experiments created by Vibe AI).
- MEMORY ROOT: `~/.config/atlastrinity/memory` (Internal system databases).

2. MEMORY SCHEMAS (INTELLECTUAL CORE)
-------------------------------------
The system uses a hybrid memory approach:

A. RELATIONAL MEMORY (SQLite - atlastrinity.db):
- `sessions`, `tasks`, `task_steps`: Logs of what was done.
- `kg_nodes`, `kg_edges`: The Knowledge Graph (Vertices and Relationships).
- `conversation_summaries`: Professional summaries of all chat history.
- `behavioral_deviations`: Record of "learned" logic shifts.

B. VECTOR MEMORY (ChromaDB):
- `lessons`: Error patterns and verified solutions.
- `strategies`: Proven plans for specific task types.
- `knowledge`: Semantic index for deep searching in the Knowledge Graph.
- `conversations`: Semantic retrieval of past context.

3. AGENT DATA DOCTRINE
----------------------
- TETYANA: Must save all scraped data/datasets to `workspace/downloads` or `workspace/vault`.
- ATLAS: Must check `conversation_summaries` and `strategies` before admiting ignorance.
- SHARED KNOWLEDGE: If you find a new ID (ЄДРПОУ) or dataset URL, ALWAYS store it in the Knowledge Graph via `kg_nodes`.

4. DATA ISOLATION (TASK SCOPING)
--------------------------------
- NAMESPACING: Any data collected for a specific task MUST be isolated using the `namespace` field in the Knowledge Graph or `task_id` in metadata.
- TASK-SPECIFIC VAULT: Large raw datasets (e.g., CSV dumps) should be stored in `workspace/vault/<task_id>/` and referenced as a single node in the global Knowledge Graph.

5. BULK INGESTION & SEMANTIC INDEXING
-------------------------------------
- VECTORIZED TABLES: For large datasets (>10,000 rows), do not create individual KG nodes for every row. 
- INDEXING STRATEGY: Create a specialized ChromaDB collection (Vectorized Table) for the dataset and link it to the KG as a node of type `DATASET`.
- BATCHING: Use the `bulk_ingest_table` tool for efficient processing (embeddings are generated in batches).

DEVIATION POLICY (ROOM TO MANEUVER)
===================================
- STORAGE VECTOR: Standard paths are the default. If a specific task or local environment requires a temporary or different path (e.g. `Desktop` for user convenience), you ARE AUTHORIZED to deviate.
- DATABASE PERSISTENCE: Never bypass the core memory servers for long-term facts, but you can use temporary JSON/CSV files in the workspace for intermediate processing.
- ISOLATION OVERRIDE: If a dataset is universally useful (e.g. a list of all bank codes), elevate it from a task-specific namespace to the `global` namespace.
